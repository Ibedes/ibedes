---
// Test Notification Button - Untuk testing notifikasi di dashboard
---

<div class="test-notification-panel">
    <h4>ðŸ§ª Test Notifikasi</h4>
    <p class="test-description">
        Klik tombol di bawah untuk menambahkan notifikasi test
    </p>

    <div class="test-buttons">
        <button
            type="button"
            class="test-btn test-btn-newsletter"
            data-test-newsletter
        >
            <i class="fa-solid fa-envelope"></i>
            <span>Newsletter</span>
        </button>
        <button type="button" class="test-btn test-btn-like" data-test-like>
            <i class="fa-solid fa-heart"></i>
            <span>Like</span>
        </button>
        <button
            type="button"
            class="test-btn test-btn-comment"
            data-test-comment
        >
            <i class="fa-solid fa-comment"></i>
            <span>Comment</span>
        </button>
        <button
            type="button"
            class="test-btn test-btn-bookmark"
            data-test-bookmark
        >
            <i class="fa-solid fa-bookmark"></i>
            <span>Bookmark</span>
        </button>
    </div>
</div>

<script>
    import {
        addNotification,
        formatNotification,
    } from "../../lib/notifications";

    // Test Newsletter
    document
        .querySelector("[data-test-newsletter]")
        ?.addEventListener("click", () => {
            const notification = formatNotification("newsletter", {
                email: "test@example.com",
                source: "/test-page",
            });
            addNotification(notification);

            // Dispatch event untuk update UI
            window.dispatchEvent(
                new CustomEvent("notification:new", {
                    detail: {
                        type: "newsletter",
                        metadata: {
                            email: "test@example.com",
                            source: "/test-page",
                        },
                    },
                }),
            );

            alert("âœ… Notifikasi newsletter ditambahkan!");
        });

    // Test Like
    document
        .querySelector("[data-test-like]")
        ?.addEventListener("click", () => {
            const notification = formatNotification("like", {
                articleSlug: "test-article",
                articleTitle: "Artikel Test",
                userHash: "user_123",
            });
            addNotification(notification);

            window.dispatchEvent(
                new CustomEvent("notification:new", {
                    detail: {
                        type: "like",
                        metadata: {
                            articleSlug: "test-article",
                            articleTitle: "Artikel Test",
                            userHash: "user_123",
                        },
                    },
                }),
            );

            alert("âœ… Notifikasi like ditambahkan!");
        });

    // Test Comment
    document
        .querySelector("[data-test-comment]")
        ?.addEventListener("click", () => {
            const notification = formatNotification("comment", {
                articleSlug: "test-article",
                articleTitle: "Artikel Test",
                commentText: "Ini adalah komentar test yang sangat menarik!",
                userHash: "user_456",
            });
            addNotification(notification);

            window.dispatchEvent(
                new CustomEvent("notification:new", {
                    detail: {
                        type: "comment",
                        metadata: {
                            articleSlug: "test-article",
                            articleTitle: "Artikel Test",
                            commentText:
                                "Ini adalah komentar test yang sangat menarik!",
                            userHash: "user_456",
                        },
                    },
                }),
            );

            alert("âœ… Notifikasi comment ditambahkan!");
        });

    // Test Bookmark
    document
        .querySelector("[data-test-bookmark]")
        ?.addEventListener("click", () => {
            const notification = formatNotification("bookmark", {
                articleSlug: "test-article",
                articleTitle: "Artikel Test",
                userHash: "user_789",
            });
            addNotification(notification);

            window.dispatchEvent(
                new CustomEvent("notification:new", {
                    detail: {
                        type: "bookmark",
                        metadata: {
                            articleSlug: "test-article",
                            articleTitle: "Artikel Test",
                            userHash: "user_789",
                        },
                    },
                }),
            );

            alert("âœ… Notifikasi bookmark ditambahkan!");
        });
</script>

<style>
    .test-notification-panel {
        background: color-mix(in srgb, #f59e0b 10%, transparent);
        border: 2px dashed #f59e0b;
        border-radius: 0.75rem;
        padding: 1.5rem;
        margin-top: 1.5rem;
    }

    .test-notification-panel h4 {
        margin: 0 0 0.5rem;
        font-size: 1rem;
        font-weight: 700;
        color: #f59e0b;
    }

    .test-description {
        margin: 0 0 1rem;
        font-size: 0.875rem;
        color: color-mix(in srgb, var(--color-foreground) 70%, transparent);
    }

    .test-buttons {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 0.75rem;
    }

    .test-btn {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        padding: 1rem;
        background: white;
        border: 2px solid transparent;
        border-radius: 0.5rem;
        cursor: pointer;
        transition: all 0.2s;
        font-size: 0.875rem;
        font-weight: 600;
    }

    .test-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .test-btn i {
        font-size: 1.5rem;
    }

    .test-btn-newsletter {
        color: #10b981;
        border-color: #10b981;
    }

    .test-btn-newsletter:hover {
        background: #10b981;
        color: white;
    }

    .test-btn-like {
        color: #ef4444;
        border-color: #ef4444;
    }

    .test-btn-like:hover {
        background: #ef4444;
        color: white;
    }

    .test-btn-comment {
        color: #3b82f6;
        border-color: #3b82f6;
    }

    .test-btn-comment:hover {
        background: #3b82f6;
        color: white;
    }

    .test-btn-bookmark {
        color: #f59e0b;
        border-color: #f59e0b;
    }

    .test-btn-bookmark:hover {
        background: #f59e0b;
        color: white;
    }

    @media (max-width: 640px) {
        .test-buttons {
            grid-template-columns: repeat(2, 1fr);
        }
    }
</style>
