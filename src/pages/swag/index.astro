---
import Layout from "../../layouts/Layout.astro";
import Section from "../../components/common/Section.astro";
import { GLOBAL } from "../../lib/variables";

const contactPhone = GLOBAL.contactPhone ?? "";
const whatsappLink = GLOBAL.contactWhatsApp ?? "";
const phoneDigits = contactPhone.replace(/\D+/g, "");
const waNumber = phoneDigits
  ? phoneDigits.startsWith("0")
    ? `62${phoneDigits.slice(1)}`
    : phoneDigits
  : "";
const waBaseLink = waNumber ? `https://wa.me/${waNumber}` : whatsappLink || "https://wa.me/";

type SwagItem = {
  name: string;
  description: string;
  price: string;
  status: "ready" | "preorder";
  statusNote: string;
  details: string[];
  batch?: string;
  shipping?: string;
  image: string;
  imageAlt: string;
};

const swagItems: SwagItem[] = [
  {
    name: "Contrast Stitch Cap",
    description:
      "Topi 5 panel warna charcoal dengan bordir logo ibedes + jahitan kontras. Cocok buat harian dan gampang dipadu padan.",
    price: "Rp160.000",
    status: "preorder",
    statusNote: "Batch #1 preorder sampai 15 Juni",
    batch: "Estimasi kirim 22–24 Juni 2025",
    details: [
      "Material twill premium + strap belakang metal",
      "Bordir timbul logo ibedes & tagline",
      "Bonus sticker pack mini di setiap paket",
    ],
    shipping: "Dikirim dari Bandung, bubble wrap + dustbag tipis.",
    image:
      "https://images.unsplash.com/photo-1512436991641-6745cdb1723f?auto=format&fit=crop&w=800&q=80",
    imageAlt: "Topi hitam dengan bordir putih di meja kayu",
  },
  {
    name: "Night Runner Tee",
    description:
      "Kaos oversized 24s combed warna hitam dengan desain glow-in-the-dark bertema circuit board.",
    price: "Rp215.000",
    status: "preorder",
    statusNote: "Preorder tutup 20 Juni",
    batch: "Produksi & kirim 28 Juni – 2 Juli",
    details: [
      "Sablon kombinasi plastisol + UV ink",
      "Ukuran S sampai XXL (chart tersedia via WA)",
      "Kerah rib double stitch supaya awet",
    ],
    shipping: "Include polybag, silica gel, dan kartu ucapan.",
    image:
      "https://images.unsplash.com/photo-1542291026-7eec264c27ff?auto=format&fit=crop&w=900&q=80",
    imageAlt: "Kaos hitam dengan desain grafis digantung di hanger kayu",
  },
  {
    name: "Signal Hoodie",
    description:
      "Hoodie fleece 280gsm warna coal dengan print tipografi besar + hidden pocket untuk gadget.",
    price: "Rp385.000",
    status: "preorder",
    statusNote: "Preorder dibuka terbatas 30 pcs",
    batch: "Produksi 3 minggu setelah pembayaran, update progres via WA.",
    details: [
      "Print puff + reflective ink",
      "Pocket samping + hidden zipper kiri",
      "Liner dalam lembut, nyaman buat kerja malam",
    ],
    shipping: "Packing dus tebal + vacuum bag, bisa request gift wrap.",
    image:
      "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?auto=format&fit=crop&w=900&q=80",
    imageAlt: "Hoodie abu-abu dengan desain minimal di studio",
  },
  {
    name: "Sticker Pack Vol.01",
    description:
      "10 stiker vinyl anti air dengan tema retro device, neon grid, dan quotes favorit ibedes.",
    price: "Rp55.000",
    status: "preorder",
    statusNote: "Diproduksi sekaligus dengan batch apparel",
    batch: "Kirim bareng item lain (estimasi akhir Juni).",
    details: [
      "Ukuran campur 4–8 cm",
      "Laminasi doff + UV protection",
      "Full-cut, mudah ditempel di laptop/botol",
    ],
    shipping: "Free mailing card + bonus 2 stiker random.",
    image:
      "https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=900&q=80",
    imageAlt: "Sticker retro warna-warni tersebar di meja",
  },
];

const howToOrder = [
  "Screenshot item yang kamu mau + jumlah/ukuran.",
  "Klik tombol WhatsApp di bawah, otomatis kebuka dengan format pesan.",
  "Konfirmasi alamat, ekspedisi, dan pembayaran (Transfer / QRIS).",
  "Tunggu update nomor resi dikirim otomatis via WhatsApp.",
];

const buildOrderLink = (item: SwagItem) => {
  const message = `Halo Ibedes! Aku mau order ${item.name} (${item.price}). Stok masih ada?`;
  return `${waBaseLink}?text=${encodeURIComponent(message)}`;
};
---

<Layout>
  <Fragment slot="head">
    <title>Swag Store • {GLOBAL.username}</title>
    <meta
      name="description"
      content="Merch resmi ibedes: tee retro, notebook, dan sticker pack. Semua order lewat WhatsApp dan dikirim langsung dari Bandung."
    />
    <meta property="og:title" content="Swag Store • ibedes" />
    <meta
      property="og:description"
      content="Pamer karya sambil dukung ibedes. Pilih merch favoritmu dan order via WhatsApp."
    />
    <meta property="og:image" content={`${GLOBAL.rootUrl}/${GLOBAL.profileImage}`} />
    <meta property="og:url" content={`${GLOBAL.rootUrl}/swag`} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Swag Store • ibedes" />
    <meta
      name="twitter:description"
      content="Merch resmi ibedes. Retro Grid Tee, notebook, sticker pack, dan lainnya."
    />
    <meta name="twitter:image" content={`${GLOBAL.rootUrl}/${GLOBAL.profileImage}`} />
    <meta http-equiv="content-language" content="id" />
    <meta name="language" content="Indonesia" />
    <link rel="canonical" href={`${GLOBAL.rootUrl}/swag`} />
  </Fragment>

  <Section class="py-16 space-y-8">
    <div class="space-y-4">
      <p class="font-display text-xs uppercase tracking-[0.35em] zag-muted">
        Swag Drop
      </p>
      <h1 class="text-3xl sm:text-4xl font-display leading-tight">
        Dukung ibedes dengan merch bergaya retro.
      </h1>
      <p class="text-base sm:text-lg max-w-2xl">
        Koleksi kecil yang aku rilis bertahap. Semua produksi lokal, fokus ke kualitas bahan dan detail.
        Order sementara via WhatsApp supaya bisa ngobrol langsung soal ukuran, stok, atau kustom packaging.
      </p>
      <div class="flex flex-wrap gap-3 text-xs uppercase tracking-[0.25em]">
        <span class="px-4 py-2 border border-black/30 dark:border-white/40 rounded-full">
          Ready + Preorder
        </span>
        <span class="px-4 py-2 border border-black/30 dark:border-white/40 rounded-full">
          Kirim dari Bandung
        </span>
      </div>
    </div>
  </Section>

  <Section class="py-10 space-y-8">
    <div class="space-y-2">
      <p class="font-display text-xs uppercase tracking-[0.35em] zag-muted">
        Produk
      </p>
      <h2 class="text-2xl font-display">Display & Pricelist</h2>
    </div>
    <div class="grid gap-6 md:grid-cols-2">
      {swagItems.map((item) => (
        <article class="rounded-3xl border border-black/20 dark:border-white/30 p-6 flex flex-col gap-4">
          <div class="relative w-full h-56 rounded-2xl overflow-hidden border border-black/10 dark:border-white/20">
            <img
              src={item.image}
              alt={item.imageAlt}
              loading="lazy"
              class="w-full h-full object-cover"
            />
          </div>
          <div class="flex flex-wrap justify-between items-start gap-3">
            <div>
              <p class="font-display text-lg">{item.name}</p>
              <p class="text-sm zag-muted">{item.description}</p>
            </div>
            <span
              class:list={[
                "text-[0.6rem] uppercase tracking-[0.35em] px-3 py-1 rounded-full border",
                item.status === "ready"
                  ? "border-emerald-400 text-emerald-600 dark:text-emerald-300"
                  : "border-amber-400 text-amber-600 dark:text-amber-300",
              ]}
            >
              {item.status === "ready" ? "Ready" : "Preorder"}
            </span>
          </div>
          <p class="text-xl font-display">{item.price}</p>
          <p class="text-xs uppercase tracking-[0.35em]">{item.statusNote}</p>
          {item.batch ? <p class="text-sm zag-muted">{item.batch}</p> : null}
          <ul class="space-y-2 text-sm">
            {item.details.map((detail) => (
              <li class="flex gap-2">
                <span aria-hidden="true">+</span>
                <span>{detail}</span>
              </li>
            ))}
          </ul>
          {item.shipping ? (
            <p class="text-xs zag-muted uppercase tracking-[0.25em]">{item.shipping}</p>
          ) : null}
          <a
            href={buildOrderLink(item)}
            target="_blank"
            rel="noopener noreferrer"
            class="cta-button cta-button--primary w-full"
          >
            Order via WhatsApp
          </a>
        </article>
      ))}
    </div>
  </Section>

  <Section class="py-12 space-y-6">
    <div class="space-y-2">
      <p class="font-display text-xs uppercase tracking-[0.35em] zag-muted">
        Cara Order
      </p>
      <h2 class="text-2xl font-display">Quick guide</h2>
    </div>
    <div class="grid gap-4 md:grid-cols-2">
      {howToOrder.map((step, index) => (
        <div class="rounded-2xl border border-dashed border-black/20 dark:border-white/30 p-4 flex gap-3">
          <span class="font-display text-xl">{index + 1}.</span>
          <p class="text-sm leading-relaxed">{step}</p>
        </div>
      ))}
    </div>
  </Section>

  <Section class="py-12">
    <div class="rounded-3xl border border-black/20 dark:border-white/30 p-6 space-y-4 text-sm">
      <p class="font-display text-xs uppercase tracking-[0.35em] zag-muted">
        Catatan pengiriman
      </p>
      <ul class="space-y-2">
        <li>• Pembayaran via Transfer BCA / BRI atau QRIS (detail dikirim setelah konfirmasi).</li>
        <li>• Tracking resi dikirim otomatis lewat WhatsApp maksimal H+1 setelah paket di-pickup.</li>
        <li>• Bisa request kartu ucapan kalau mau dikirim sebagai hadiah.</li>
      </ul>
    </div>
  </Section>
</Layout>
